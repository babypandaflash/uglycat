<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Early Access | Ugly Cat Chain</title>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"/>

<!-- Solana Web3.js -->
<script src="https://cdn.jsdelivr.net/npm/@solana/web3.js@1.73.2/lib/index.iife.min.js"></script>

<!-- Ethers.js -->
<script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>

<!-- Web3Forms (Free Email Service) -->
<!-- Google OAuth -->
<script src="https://accounts.google.com/gsi/client" async defer></script>
<script>
// NO NEED FOR EMAILJS - Using Web3Forms (100% Free)
</script>

<style>
:root{
--bg:#0b0e14;--card:#121826;--primary:#6cf2c2;
--secondary:#8aa2ff;--text:#e6e9f0;--muted:#9aa4bf
}
*{margin:0;padding:0;box-sizing:border-box;font-family:Arial}
body{background:var(--bg);color:var(--text)}

.topbar{
position:fixed;top:0;left:0;width:100%;height:64px;
background:#0b0e14;border-bottom:1px solid #1c2335;
display:flex;align-items:center;justify-content:space-between;
padding:0 20px;z-index:1000
}
.topbar img{width:36px}
.title{position:absolute;left:50%;transform:translateX(-50%);font-weight:bold}
.menu-btn{font-size:24px;cursor:pointer}

.hamburger-menu{
position:fixed;top:64px;right:5px;width:210px;
background:var(--card);border-radius:16px;
padding:16px;display:none;flex-direction:column;gap:10px;
box-shadow:0 20px 40px rgba(0,0,0,.5);z-index:1200
}
.hamburger-menu a{
color:var(--text);text-decoration:none;font-weight:bold;
padding:12px;border-radius:12px
}
.hamburger-menu a:hover{background:rgba(108,242,194,.15);color:var(--primary)}

header{
margin-top:64px;padding:80px 20px;text-align:center;
background:linear-gradient(135deg,#0b0e14,#121826)
}
header h1{font-size:2.6rem;margin-bottom:16px}
header p{color:var(--muted);max-width:600px;margin:auto}

.access-card{
max-width:420px;margin:60px auto;
background:var(--card);padding:32px;border-radius:20px;
box-shadow:0 20px 50px rgba(0,0,0,.4);text-align:center
}
.access-card h2{margin-bottom:12px;color:var(--primary)}
.access-card p{font-size:.95rem;color:var(--muted);margin-bottom:28px}

.join-btn{
width:100%;padding:16px;border-radius:999px;border:none;
font-weight:bold;font-size:1.1rem;cursor:pointer;color:#000;
background:linear-gradient(135deg,var(--primary),var(--secondary));
transition:transform 0.2s;
}
.join-btn:hover{transform:scale(1.02)}

.social-bar{
display:flex;justify-content:center;gap:22px;
padding:40px 20px 20px
}
.social-bar a{
width:46px;height:46px;border-radius:50%;
background:var(--card);display:flex;align-items:center;justify-content:center;
color:var(--text);font-size:20px;text-decoration:none;
transition:all 0.3s;
}
.social-bar a:hover{background:var(--primary);color:#000;transform:scale(1.1)}

footer{
padding:40px 20px;text-align:center;
color:var(--muted);border-top:1px solid #1c2335
}

/* POPUP */
.popup{
position:fixed;inset:0;background:rgba(0,0,0,.8);
display:none;align-items:center;justify-content:center;z-index:2000;
backdrop-filter:blur(4px);
}
.popup-card{
background:var(--card);padding:40px;border-radius:20px;
text-align:center;max-width:420px;width:90%;
box-shadow:0 30px 60px rgba(0,0,0,.6);
animation:popupSlide 0.3s ease-out;
}
@keyframes popupSlide{
from{opacity:0;transform:translateY(-20px)}
to{opacity:1;transform:translateY(0)}
}
.popup-card h3{color:var(--primary);margin-bottom:12px}
.popup-card p{font-size:.9rem;color:var(--muted);margin-bottom:12px}
.popup-card button{
margin-top:16px;padding:10px 22px;border-radius:999px;
border:none;background:var(--primary);cursor:pointer;color:#000;font-weight:bold
}

/* EARLY ACCESS POPUP */
.access-popup-header{text-align:center;margin-bottom:24px}
.access-popup-title{
font-size:1.8rem;font-weight:bold;color:var(--primary);
margin-bottom:16px;letter-spacing:1px;
}
.access-popup-logo{
width:80px;height:80px;margin:0 auto 20px;
animation:float 3s ease-in-out infinite;
object-fit:contain;
}
@keyframes float{
0%,100%{transform:translateY(0px)}
50%{transform:translateY(-10px)}
}
.access-popup-subtitle{
font-size:.95rem;color:var(--text);margin-bottom:8px;
}
.access-popup-description{
font-size:.85rem;color:var(--muted);margin-bottom:24px;
line-height:1.5;
}
.access-input{
width:100%;padding:14px;border-radius:12px;
border:1px solid #1c2335;background:var(--bg);
color:var(--text);font-size:1rem;margin-bottom:16px;
transition:border 0.3s;
}
.access-input:focus{
outline:none;border-color:var(--primary);
}
.access-submit-btn{
width:100%;padding:14px;border-radius:999px;border:none;
font-weight:bold;font-size:1rem;cursor:pointer;color:#000;
background:linear-gradient(135deg,var(--primary),var(--secondary));
transition:transform 0.2s;
}
.access-submit-btn:hover{transform:scale(1.02)}
.access-submit-btn:disabled{
opacity:0.6;cursor:not-allowed;
}

.divider{
display:flex;align-items:center;gap:12px;margin:20px 0;
color:var(--muted);font-size:.9rem;
}
.divider::before,.divider::after{
content:'';flex:1;height:1px;background:#1c2335;
}

.social-login-btn{
width:100%;padding:12px;border-radius:999px;border:none;
font-weight:bold;font-size:.95rem;cursor:pointer;
margin-bottom:10px;display:flex;align-items:center;
justify-content:center;gap:10px;transition:transform 0.2s;
}
.social-login-btn:hover{transform:scale(1.02)}
.btn-google{background:#fff;color:#000}
.btn-twitter{background:#1DA1F2;color:#fff}
.btn-discord{background:#5865F2;color:#fff}
.access-close:hover{background:var(--primary);color:#000;transform:rotate(90deg)}

.powered-by{
display:flex;align-items:center;justify-content:center;gap:6px;
font-size:.88rem;color:var(--muted);margin-top:20px;font-weight:500;
}
.powered-by-logo{
width:20px;height:20px;object-fit:contain;
}

.hidden{display:none!important}

.otp-container{
display:flex;gap:10px;justify-content:center;margin-bottom:16px;
}
.otp-input{
width:50px;height:50px;text-align:center;
font-size:1.5rem;border-radius:12px;
border:2px solid #1c2335;background:var(--bg);
color:var(--text);font-weight:bold;
}
.otp-input:focus{
outline:none;border-color:var(--primary);
}

.resend-otp{
color:var(--primary);cursor:pointer;
text-decoration:underline;font-size:.9rem;
margin-top:10px;display:inline-block;
}
.resend-otp:hover{color:var(--secondary)}

.loading-spinner{
display:inline-block;width:16px;height:16px;
border:3px solid rgba(0,0,0,.3);
border-top-color:#000;border-radius:50%;
animation:spin 0.6s linear infinite;
margin-left:8px;
}
@keyframes spin{
to{transform:rotate(360deg)}
}
</style>
</head>

<body>

<div class="topbar">
<img src="https://raw.githubusercontent.com/babypandaflash/image/refs/heads/main/logo.png"/>
<div class="title">Ugly Cat Chain</div>
<div class="menu-btn">‚ò∞</div>
</div>

<div class="hamburger-menu" id="hamburgerMenu">
<a href="index.html">Home</a>
<a href="earlyaccess.html">Early Access</a>
<a href="#" class="coming-soon">UglyCat App</a>
<a href="#" class="coming-soon">UglyCat Wallet</a>
<a href="#" class="coming-soon">UglyCat NFT</a>
<a href="#" class="coming-soon">Marketplace</a>
<a href="#" class="coming-soon">Tokenomics</a>
<a href="roadmap.html">Roadmap</a>
</div>

<header>
<h1>Early Community Access</h1>
<p>Join the earliest members of Ugly Cat Chain and unlock exclusive NFT utilities, early features, and future rewards.</p>
</header>

<div class="access-card">
<h2>Join Early Community</h2>
<p>Be part of the exclusive early access community and get your wallet ready for the future of Ugly Cat Chain.</p>

<button class="join-btn" id="joinBtn">
<i class="fas fa-rocket"></i> Join Early Access
</button>
</div>

<div class="social-bar">
<a href="#"><i class="fa-brands fa-x-twitter"></i></a>
<a href="#"><i class="fa-brands fa-discord"></i></a>
<a href="#"><i class="fa-brands fa-instagram"></i></a>
<a href="#"><i class="fa-brands fa-telegram"></i></a>
<a href="#"><i class="fa-brands fa-youtube"></i></a>
</div>

<footer>¬© 2025 Ugly Cat Chain. All rights reserved.</footer>

<!-- COMING SOON POPUP -->
<div class="popup" id="comingSoonPopup">
<div class="popup-card">
<h3>Coming Soon</h3>
<p>This feature is under development.</p>
<button id="closeComing">Close</button>
</div>
</div>

<!-- EARLY ACCESS POPUP -->
<div class="popup" id="earlyAccessPopup">
<div class="popup-card" style="position:relative">

<div class="access-popup-header">
<div class="access-popup-title">Ugly Cat Chain</div>
<img src="https://raw.githubusercontent.com/babypandaflash/image/refs/heads/main/logo.png" class="access-popup-logo" alt="Ugly Cat Logo"/>
</div>

<!-- Email Step -->
<div id="emailStep">
<h3 class="access-popup-subtitle">üöÄ Join the Revolution</h3>
<p class="access-popup-description">
Be among the first to experience the future of blockchain. 
Get exclusive early access, special NFT utilities, and unlock rewards before everyone else.
</p>

<input 
  type="email" 
  class="access-input" 
  id="accessEmail" 
  placeholder="Enter your email address"
  required
/>

<button class="access-submit-btn" id="accessSubmit">
<i class="fas fa-rocket"></i> <span id="submitBtnText">Login/Sign Up</span>
</button>

<div class="divider">OR</div>

<button class="social-login-btn btn-google" id="googleLoginBtn">
<i class="fa-brands fa-google"></i> Continue with Google
</button>

<button class="social-login-btn btn-twitter" id="twitterLoginBtn">
<i class="fa-brands fa-x-twitter"></i> Continue with Twitter
</button>

<button class="social-login-btn btn-discord" id="discordLoginBtn">
<i class="fa-brands fa-discord"></i> Continue with Discord
</button>
</div>

<!-- OTP Step -->
<div id="otpStep" class="hidden">
<h3 class="access-popup-subtitle">üîê Verify Your Email</h3>
<p class="access-popup-description">
We've sent a 6-digit code to <strong id="emailDisplay"></strong>
</p>

<div class="otp-container">
<input type="text" class="otp-input" maxlength="1" id="otp1"/>
<input type="text" class="otp-input" maxlength="1" id="otp2"/>
<input type="text" class="otp-input" maxlength="1" id="otp3"/>
<input type="text" class="otp-input" maxlength="1" id="otp4"/>
<input type="text" class="otp-input" maxlength="1" id="otp5"/>
<input type="text" class="otp-input" maxlength="1" id="otp6"/>
</div>

<button class="access-submit-btn" id="verifyOtpBtn">
<i class="fas fa-check-circle"></i> Verify OTP
</button>

<p style="margin-top:16px;color:var(--muted);font-size:.85rem">
Didn't receive the code? 
<span class="resend-otp" id="resendOtp">Resend OTP</span>
</p>

<p style="margin-top:12px">
<span style="color:var(--primary);cursor:pointer;font-size:.9rem" id="backToEmail">
‚Üê Back to email
</span>
</p>
</div>

<div class="powered-by">
<span>Powered by</span>
<img src="https://raw.githubusercontent.com/babypandaflash/image/refs/heads/main/logo.png" class="powered-by-logo" alt="Ugly Cat"/>
<span>Ugly Cat</span>
</div>
</div>
</div>

<script>
// WEB3FORMS - 100% FREE EMAIL SERVICE
// Daftar gratis di: https://web3forms.com/
// Ganti ACCESS_KEY di bawah dengan Access Key Anda

const WEB3FORMS_ACCESS_KEY = "9150fe5b-5734-42dd-8c42-581d5befb4a3";

// GOOGLE OAUTH CLIENT ID
// Dapatkan dari: https://console.cloud.google.com/
const GOOGLE_CLIENT_ID = "90096174534-hcrkepli0ik7uop9t8bq1aegdjj84dg9.apps.googleusercontent.com";

let generatedOTP = '';
let userEmail = '';
let googleUser = null;

// Hamburger Menu
const menuBtn = document.querySelector('.menu-btn');
const menu = document.getElementById('hamburgerMenu');
menuBtn.onclick = () => menu.style.display = menu.style.display === 'flex' ? 'none' : 'flex';
document.addEventListener('click', e => {
  if (!menu.contains(e.target) && !menuBtn.contains(e.target)) menu.style.display = 'none'
});

// Coming Soon
const comingSoonPopup = document.getElementById('comingSoonPopup');
document.querySelectorAll('.coming-soon').forEach(el => {
  el.onclick = e => { 
    e.preventDefault(); 
    comingSoonPopup.style.display = 'flex'; 
    menu.style.display = 'none' 
  }
});
document.getElementById('closeComing').onclick = () => comingSoonPopup.style.display = 'none';

// Join Early Access Button
document.getElementById('joinBtn').onclick = () => {
  document.getElementById('earlyAccessPopup').style.display = 'flex';
};

// Generate Random OTP
function generateOTP() {
  return Math.floor(100000 + Math.random() * 900000).toString();
}

// Send OTP via Email using Web3Forms (Free!)
async function sendOTP(email, otp) {
  try {
    const response = await fetch("https://api.web3forms.com/submit", {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
        "Accept": "application/json"
      },
      body: JSON.stringify({
        access_key: WEB3FORMS_ACCESS_KEY,
        subject: "üîê Ugly Cat Chain - Your Verification Code",
        from_name: "Ugly Cat Chain",
        to: email,
        message: `
Hello!

Your OTP verification code for Ugly Cat Chain is:

üî¢ ${otp}

This code will expire in 10 minutes.

If you didn't request this code, please ignore this email.

Best regards,
Ugly Cat Chain Team
        `
      })
    });

    const result = await response.json();
    
    if (result.success) {
      console.log('OTP sent successfully to:', email);
      return true;
    } else {
      console.error('Failed to send OTP:', result.message);
      alert('Error: ' + result.message);
      return false;
    }
  } catch (error) {
    console.error('Network error:', error);
    alert('Network error. Please check your connection.');
    return false;
  }
}

// Alternative: Simulasi pengiriman OTP (untuk testing tanpa EmailJS)
function sendOTPSimulated(email, otp) {
  return new Promise((resolve) => {
    console.log(`Simulated: Sending OTP ${otp} to ${email}`);
    // Tampilkan OTP di console untuk testing
    alert(`Testing Mode: Your OTP is ${otp}\n\nIn production, this will be sent to ${email}`);
    setTimeout(() => resolve(true), 1000);
  });
}

// Submit Email and Send OTP
document.getElementById('accessSubmit').onclick = async () => {
  const email = document.getElementById('accessEmail').value.trim();
  const submitBtn = document.getElementById('accessSubmit');
  const btnText = document.getElementById('submitBtnText');
  
  if (!email) {
    alert('Please enter your email address');
    return;
  }
  
  if (!email.includes('@') || !email.includes('.')) {
    alert('Please enter a valid email address');
    return;
  }
  
  // Disable button and show loading
  submitBtn.disabled = true;
  btnText.innerHTML = 'Sending OTP<span class="loading-spinner"></span>';
  
  // Generate OTP
  generatedOTP = generateOTP();
  userEmail = email;
  
  // Send OTP using Web3Forms (100% Free!)
  const success = await sendOTP(email, generatedOTP);
  
  if (success) {
    // Show OTP step
    document.getElementById('emailStep').classList.add('hidden');
    document.getElementById('otpStep').classList.remove('hidden');
    document.getElementById('emailDisplay').textContent = email;
    
    // Focus first OTP input
    document.getElementById('otp1').focus();
  } else {
    alert('Failed to send OTP. Please try again.');
  }
  
  // Re-enable button
  submitBtn.disabled = false;
  btnText.textContent = 'Login/Sign Up';
};

// OTP Input Auto-focus
const otpInputs = document.querySelectorAll('.otp-input');
otpInputs.forEach((input, index) => {
  input.addEventListener('input', (e) => {
    if (e.target.value.length === 1 && index < otpInputs.length - 1) {
      otpInputs[index + 1].focus();
    }
  });
  
  input.addEventListener('keydown', (e) => {
    if (e.key === 'Backspace' && e.target.value === '' && index > 0) {
      otpInputs[index - 1].focus();
    }
  });
  
  // Only allow numbers
  input.addEventListener('keypress', (e) => {
    if (!/[0-9]/.test(e.key)) {
      e.preventDefault();
    }
  });
});

// Verify OTP
document.getElementById('verifyOtpBtn').onclick = () => {
  const otp = Array.from(otpInputs).map(input => input.value).join('');
  
  if (otp.length !== 6) {
    alert('Please enter the complete 6-digit OTP');
    return;
  }
  
  if (otp === generatedOTP) {
    alert(`Welcome! You have successfully verified your email: ${userEmail}\n\nYou now have early access to Ugly Cat Chain! üéâ`);
    
    // Reset and close popup
    document.getElementById('earlyAccessPopup').style.display = 'none';
    document.getElementById('otpStep').classList.add('hidden');
    document.getElementById('emailStep').classList.remove('hidden');
    document.getElementById('accessEmail').value = '';
    otpInputs.forEach(input => input.value = '');
    
    // TODO: Save user to database or proceed with login
  } else {
    alert('Invalid OTP. Please try again.');
    otpInputs.forEach(input => input.value = '');
    document.getElementById('otp1').focus();
  }
};

// Resend OTP
document.getElementById('resendOtp').onclick = async () => {
  generatedOTP = generateOTP();
  
  const success = await sendOTP(userEmail, generatedOTP);
  
  if (success) {
    alert('New OTP has been sent to your email!');
    otpInputs.forEach(input => input.value = '');
    document.getElementById('otp1').focus();
  } else {
    alert('Failed to resend OTP. Please try again.');
  }
};

// Back to Email
document.getElementById('backToEmail').onclick = () => {
  document.getElementById('otpStep').classList.add('hidden');
  document.getElementById('emailStep').classList.remove('hidden');
  otpInputs.forEach(input => input.value = '');
};

// Google Login
// Google Login
function initGoogleSignIn() {
  if (typeof google === 'undefined') {
    console.log('Google Sign-In library not loaded yet');
    return;
  }
  
  google.accounts.id.initialize({
    client_id: GOOGLE_CLIENT_ID,
    callback: handleGoogleCallback
  });
}

function handleGoogleCallback(response) {
  // Decode JWT token
  const payload = parseJwt(response.credential);
  
  googleUser = {
    email: payload.email,
    name: payload.name,
    picture: payload.picture,
    sub: payload.sub
  };
  
  console.log('Google User:', googleUser);
  
  // Close popup and show success
  document.getElementById('earlyAccessPopup').style.display = 'none';
  
  alert(`Welcome ${googleUser.name}! üéâ\n\nYou have successfully logged in with Google.\n\nEmail: ${googleUser.email}\n\nYou now have early access to Ugly Cat Chain!`);
  
  // TODO: Save user to database or proceed with your app
}

function parseJwt(token) {
  const base64Url = token.split('.')[1];
  const base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');
  const jsonPayload = decodeURIComponent(atob(base64).split('').map(c => {
    return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);
  }).join(''));
  return JSON.parse(jsonPayload);
}

document.getElementById('googleLoginBtn').onclick = () => {
  if (typeof google === 'undefined' || !google.accounts) {
    alert('Google Sign-In is loading... Please wait a moment and try again.');
    setTimeout(initGoogleSignIn, 1000);
    return;
  }
  
  google.accounts.id.prompt((notification) => {
    if (notification.isNotDisplayed() || notification.isSkippedMoment()) {
      // Fallback: show One Tap dialog
      google.accounts.id.renderButton(
        document.getElementById('googleLoginBtn'),
        { 
          theme: "filled_blue", 
          size: "large",
          width: document.getElementById('googleLoginBtn').offsetWidth
        }
      );
    }
  });
};

// Twitter Login
document.getElementById('twitterLoginBtn').onclick = () => {
  alert('Twitter login coming soon!');
};

// Discord Login
document.getElementById('discordLoginBtn').onclick = () => {
  alert('Discord login coming soon!');
};

// Close popup when clicking outside
document.getElementById('earlyAccessPopup').onclick = (e) => {
  if (e.target.id === 'earlyAccessPopup') {
    document.getElementById('earlyAccessPopup').style.display = 'none';
    document.getElementById('otpStep').classList.add('hidden');
    document.getElementById('emailStep').classList.remove('hidden');
    otpInputs.forEach(input => input.value = '');
  }
};

// Initialize Google Sign-In when page loads
window.onload = () => {
  setTimeout(initGoogleSignIn, 1000);
};
</script>

</body>
</html>
